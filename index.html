<!DOCTYPE html>
<html>
<head>
    <title>PDF to Image</title>
    
</head>
<body>

    <h1>My PDF</h1>
<div id="pdfContainer1"></div>

    <button id="convertButton">Convert</button>
    <div id="output"></div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.4.456/pdf.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.2.2/jszip.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/1.3.8/FileSaver.min.js"></script>
    <script >

function renderPDF(url, containerId) {
    const container = document.getElementById(containerId);

    pdfjsLib.getDocument(url).promise.then((pdf) => {
        pdf.getPage(1).then((page) => {
            const scale = 1.5;
            const viewport = page.getViewport({scale});

            const canvas = document.createElement('canvas');
            const context = canvas.getContext('2d');
            canvas.width = viewport.width;
            canvas.height = viewport.height;

            const renderContext = {
                canvasContext: context,
                viewport: viewport,
            };

            container.appendChild(canvas);

            page.render(renderContext);
        });
    });
}
// 
        

var pdfjsLib = window['pdfjs-dist/build/pdf'];

pdfjsLib.GlobalWorkerOptions.workerSrc = '//cdnjs.cloudflare.com/ajax/libs/pdf.js/2.4.456/pdf.worker.min.js';


var pdfFilePathOrData = './file-sample_150kB.pdf';

document.getElementById('convertButton').addEventListener('click', function() {
    convertPdfToImages(pdfFilePathOrData);
});

function convertPdfToImages(pdfFilePathOrData) {
    var loadingTask = pdfjsLib.getDocument(pdfFilePathOrData);
    loadingTask.promise.then(function(pdf) {
        var zip = new JSZip();
        var promises = [];

        for (var i = 1; i <= pdf.numPages; i++) {
            promises.push(convertPageToImage(pdf, i, zip));
        }

        Promise.all(promises).then(function() {
            zip.generateAsync({ type: 'blob' }).then(function(content) {
                saveAs(content, 'images.zip');
            });
        });
    });
}

function convertPageToImage(pdf, pageNumber, zip) {
    return new Promise(function(resolve, reject) {
        pdf.getPage(pageNumber).then(function(page) {
            var viewport = page.getViewport({ scale: 1 });
            var canvas = document.createElement('canvas');
            var context = canvas.getContext('2d');
            canvas.height = viewport.height;
            canvas.width = viewport.width;

            var renderTask = page.render({ canvasContext: context, viewport: viewport });
            renderTask.promise.then(function() {
                canvas.toBlob(function(blob) {
                    zip.file('image' + pageNumber + '.png', blob);
                    resolve();
                }, 'image/png');
            });
        });
    });
}

renderPDF('./file-sample_150kB.pdf', 'pdfContainer1');


    </script>
</body>
</html>